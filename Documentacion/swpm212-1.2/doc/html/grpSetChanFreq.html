<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SWPM AT86RF212: RF Channel Selection</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">AT86RF212 Programming</a>&nbsp;&raquo&nbsp;<a class="el" href="pgSwpmAT86RF212.html">Software Programming Model</a>&nbsp;&raquo&nbsp;<a class="el" href="grpCfg.html">Radio Transceiver Configuration</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="grpSetChanFreq">RF Channel Selection </a></h1>There are two methods for selecting the RF channel of the radio transceiver, see <a class="el" href="pgRef.html#refDataSheet">section 7.8.2</a> <em>(RF Channel Selection)</em> of the AT86RF212 datasheet.<p>
<ul>
<li><a class="el" href="grpSetChanFreq.html#secSetChan">IEEE 802.15.4 RF Channel Selection</a></li><li><a class="el" href="grpSetChanFreq.html#secSetFreq">User-defined RF Channel Selection</a></li></ul>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ccband</em>&nbsp;</td><td>RF channel band:<br>
 {0} for IEEE 802.15.4 RF channels;<br>
 {1,...,5} for user-defined RF channels;<br>
 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>channel</em>&nbsp;</td><td>Number of an IEEE 802.15.4 RF channel: {0,...,10};<br>
 <b><em>All other values are reserved and must not be used</em></b>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ccnumber</em>&nbsp;</td><td>center frequency index:<br>
 {0,...,255} for <code>ccband={1</code>,2,3};<br>
 {0,...,94} for <code>ccband=4</code>;<br>
 {0,...,102} for <code>ccband=5</code>;<br>
 <b><em>All other values are reserved and must not be used</em></b></td></tr>
  </table>
</dl>
<h2><a class="anchor" name="secSetChan">
IEEE 802.15.4 RF Channel Selection</a></h2>
The radio transceiver can be configured to send and receive on the <a class="el" href="pgRef.html#refeightohtwo154">IEEE 802.15.4 RF channels</a> 0 to 10.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>When using IEEE 802.15.4 RF channels for radio transceiver operation, it has to be ensured, that in the subregister <a class="el" href="group__apiHalPHY212Sreg.html#gb220c6ee123c7e8c4df8339ef27ae36c">SR_CC_BAND</a> the value <code>ccband=0</code> is stored. Unless the value of the parameter <code>ccband</code> is not changed by the software, an explicit write of this subregister can ommited in the use cases <a class="el" href="grpSetChanFreq.html#secphy_set_current_channel">PHY_SET_CHANNEL</a> and <a class="el" href="grpSetChanFreq.html#secphy_set_current_channel_lock">PHY_SET_CHANNEL_LOCK</a>.</dd></dl>
<b>Use Cases:</b><ul>
<li><a class="el" href="grpSetChanFreq.html#secphy_set_current_channel">PHY_SET_CHANNEL</a></li><li><a class="el" href="grpSetChanFreq.html#secphy_set_current_channel_lock">PHY_SET_CHANNEL_LOCK</a></li><li><a class="el" href="grpSetChanFreq.html#secphy_get_current_channel">PHY_GET_CHANNEL</a></li></ul>
<h2><a class="anchor" name="secSetFreq">
User-defined RF Channel Selection</a></h2>
The radio transceiver can be configured to send and receive on user-defined RF channels in the range from 779 - 935 MHz according to <a class="el" href="pgRef.html#refDataSheet">table 7-34</a> <em>(Frequency Bands and Numbers)</em> in the AT86RF212 datasheet.<p>
<b>Use Cases:</b><ul>
<li><a class="el" href="grpSetChanFreq.html#secphy_set_freq">PHY_SET_FREQ</a></li><li><a class="el" href="grpSetChanFreq.html#secphy_set_freq_lock">PHY_SET_FREQ_LOCK</a></li><li><a class="el" href="grpSetChanFreq.html#secphy_get_freq">PHY_GET_FREQ</a></li></ul>
<p>
<hr>
<h2><a class="anchor" name="secphy_set_current_channel">
PHY_SET_CHANNEL</a></h2>
A IEEE-802.15.4 RF channel is set by writing the channel number to the sub register <a class="el" href="group__apiHalPHY212Sreg.html#g4b9bff87f5d63f845e3fad83286624db">SR_CHANNEL</a>.<p>
<div align="center">
<img src="inline_mscgraph_10.png" alt="inline_mscgraph_10" border="0" usemap="#inline_mscgraph_10.map">
<map name="inline_mscgraph_10.map"><area href="grpIntroStates.html#stTrxOff" shape="rect" coords="430,26,470,39" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::TRX_OFF */</span>
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gb220c6ee123c7e8c4df8339ef27ae36c">SR_CC_BAND</a>, 0);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g4b9bff87f5d63f845e3fad83286624db">SR_CHANNEL</a>, channel);
</pre></div></dd></dl>
<h2><a class="anchor" name="secphy_set_current_channel_lock">
PHY_SET_CHANNEL_LOCK</a></h2>
If the channel is set in one of the states <a class="el" href="grpIntroStates.html#stPllActive">[PLL_ACTIVE]</a>, after writing the sub register <a class="el" href="group__apiHalPHY212Sreg.html#g4b9bff87f5d63f845e3fad83286624db">SR_CHANNEL</a> the <a class="el" href="group__apiHalPHY212Const.html#g3a84434fef569c52df0df298c308e624">TRX_IRQ_PLL_LOCK</a> interrupt is generated, if a channel number which is different from the current channel number, is written to the radio transceiver. This sequence can be used to ensure, whether the PLL has locked to the new frequency.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>For each write access to one of the sub registers <a class="el" href="group__apiHalPHY212Sreg.html#gb220c6ee123c7e8c4df8339ef27ae36c">SR_CC_BAND</a> and <a class="el" href="group__apiHalPHY212Sreg.html#g4b9bff87f5d63f845e3fad83286624db">SR_CHANNEL</a> a separate <a class="el" href="group__apiHalPHY212Const.html#g3a84434fef569c52df0df298c308e624">TRX_IRQ_PLL_LOCK</a> interrupt may occur.</dd></dl>
<div align="center">
<img src="inline_mscgraph_11.png" alt="inline_mscgraph_11" border="0" usemap="#inline_mscgraph_11.map">
<map name="inline_mscgraph_11.map"><area href="grpIntroStates.html#stPllActive" shape="rect" coords="415,26,485,39" alt="">
<area href="pgConst.html#tTR20" shape="rect" coords="160,94,195,107" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::[PLL_ACTIVE] */</span>
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gb220c6ee123c7e8c4df8339ef27ae36c">SR_CC_BAND</a>, 0);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g4b9bff87f5d63f845e3fad83286624db">SR_CHANNEL</a>, channel);
    delay(tTR20);
</pre></div></dd></dl>
<h2><a class="anchor" name="secphy_get_current_channel">
PHY_GET_CHANNEL</a></h2>
It is checked, that the parameter <code>ccband</code> has the value 0, in order to ensure, that the value read from sub register <a class="el" href="group__apiHalPHY212Sreg.html#g4b9bff87f5d63f845e3fad83286624db">SR_CHANNEL</a> is valid. The channel number can be read at any time without affecting any ongoing transactions (send, receive).<p>
<div align="center">
<img src="inline_mscgraph_12.png" alt="inline_mscgraph_12" border="0" usemap="#inline_mscgraph_12.map">
<map name="inline_mscgraph_12.map"><area href="grpIntroStates.html#stTrxActive" shape="rect" coords="427,26,473,39" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::[ACTIVE] */</span>
    ccband = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gb220c6ee123c7e8c4df8339ef27ae36c">SR_CC_BAND</a>);
    ASSERT(ccband==0);
    channel = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g4b9bff87f5d63f845e3fad83286624db">SR_CHANNEL</a>);
</pre></div></dd></dl>
<h2><a class="anchor" name="secphy_set_freq">
PHY_SET_FREQ</a></h2>
An user-defined center frequency is set by configuring the sub registers <a class="el" href="group__apiHalPHY212Sreg.html#g8848b8dba6f06565650e580c0d29bab9">SR_CC_NUMBER</a> and <a class="el" href="group__apiHalPHY212Sreg.html#gb220c6ee123c7e8c4df8339ef27ae36c">SR_CC_BAND</a>.<p>
<div align="center">
<img src="inline_mscgraph_13.png" alt="inline_mscgraph_13" border="0" usemap="#inline_mscgraph_13.map">
<map name="inline_mscgraph_13.map"><area href="grpIntroStates.html#stTrxOff" shape="rect" coords="430,26,470,39" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::TRX_OFF */</span>
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gb220c6ee123c7e8c4df8339ef27ae36c">SR_CC_BAND</a>, ccband);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g8848b8dba6f06565650e580c0d29bab9">SR_CC_NUMBER</a>, ccnumber);
</pre></div></dd></dl>
<h2><a class="anchor" name="secphy_set_freq_lock">
PHY_SET_FREQ_LOCK</a></h2>
If a new user-defined center frequency is configured in one of the states <a class="el" href="grpIntroStates.html#stPllActive">[PLL_ACTIVE]</a>, a <a class="el" href="group__apiHalPHY212Const.html#g3a84434fef569c52df0df298c308e624">TRX_IRQ_PLL_LOCK</a> interrupt is generated after writing the sub register <a class="el" href="group__apiHalPHY212Sreg.html#gb220c6ee123c7e8c4df8339ef27ae36c">SR_CC_BAND</a>. This sequence can be used to ensure, whether the PLL has locked to the new frequency.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>For each write access to one of the sub registers <a class="el" href="group__apiHalPHY212Sreg.html#gb220c6ee123c7e8c4df8339ef27ae36c">SR_CC_BAND</a> and <a class="el" href="group__apiHalPHY212Sreg.html#g8848b8dba6f06565650e580c0d29bab9">SR_CC_NUMBER</a> a separate <a class="el" href="group__apiHalPHY212Const.html#g3a84434fef569c52df0df298c308e624">TRX_IRQ_PLL_LOCK</a> interrupt may occur.</dd></dl>
<div align="center">
<img src="inline_mscgraph_14.png" alt="inline_mscgraph_14" border="0" usemap="#inline_mscgraph_14.map">
<map name="inline_mscgraph_14.map"><area href="grpIntroStates.html#stPllActive" shape="rect" coords="415,26,485,39" alt="">
<area href="pgConst.html#tTR20" shape="rect" coords="160,94,195,107" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::[PLL_ACTIVE] */</span>
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gb220c6ee123c7e8c4df8339ef27ae36c">SR_CC_BAND</a>, ccband);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g8848b8dba6f06565650e580c0d29bab9">SR_CC_NUMBER</a>, ccnumber);
    delay(tTR20);
</pre></div></dd></dl>
<h2><a class="anchor" name="secphy_get_freq">
PHY_GET_FREQ</a></h2>
It is checked, that the parameter <code>ccband</code> is not 0, in order to ensure, that the value read from sub register <a class="el" href="group__apiHalPHY212Sreg.html#g8848b8dba6f06565650e580c0d29bab9">SR_CC_NUMBER</a> is valid. The value from the sub registers <a class="el" href="group__apiHalPHY212Sreg.html#g8848b8dba6f06565650e580c0d29bab9">SR_CC_NUMBER</a> and <a class="el" href="group__apiHalPHY212Sreg.html#gb220c6ee123c7e8c4df8339ef27ae36c">SR_CC_BAND</a> can be read at any time without affecting any transaction.<p>
<div align="center">
<img src="inline_mscgraph_15.png" alt="inline_mscgraph_15" border="0" usemap="#inline_mscgraph_15.map">
<map name="inline_mscgraph_15.map"><area href="grpIntroStates.html#stTrxActive" shape="rect" coords="427,26,473,39" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::[ACTIVE] */</span>
    ccband = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gb220c6ee123c7e8c4df8339ef27ae36c">SR_CC_BAND</a>);
    ASSERT(ccband!=0);
    ccnumber = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g8848b8dba6f06565650e580c0d29bab9">SR_CC_NUMBER</a>);
</pre></div> </dd></dl>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Aug 17 13:34:59 2009 for SWPM AT86RF212 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
