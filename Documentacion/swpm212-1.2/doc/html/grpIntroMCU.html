<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SWPM AT86RF212: Microcontroller Interface</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">AT86RF212 Programming</a>&nbsp;&raquo&nbsp;<a class="el" href="pgSwpmAT86RF212.html">Software Programming Model</a>&nbsp;&raquo&nbsp;<a class="el" href="grpIntro.html">Introduction</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="grpIntroMCU">Microcontroller Interface </a></h1>The interface between the microcontroller and the radio transceiver consists of a SPI interface (/SEL, MOSI, MISO, SCLK), the clock output pin (CLKM), the interrupt pins (IRQ/DIG2) and control pins (/RST, SLP_TR).<p>
<div align="center">
<img src="Microcontroller_to_AT86RF212_Interface.png" alt="Microcontroller_to_AT86RF212_Interface.png">
<p><strong>Microcontroller to AT86RF212 Interface</strong></p></div>
  <h2><a class="anchor" name="secSP">
Serial Peripheral Interface (SPI)</a></h2>
<h3><a class="anchor" name="wireSPI">
SPI Interface (/SEL, MOSI, MISO, SCLK)</a></h3>
SPI stands for Serial Peripheral Interface and is a synchronous bidirectional serial data bus. Detailed information about the characteristics of this interface can be found in <a class="el" href="pgRef.html#refDataSheet">section 4.2</a> <em>(SPI Timing)</em> and <a class="el" href="pgRef.html#refDataSheet">section 4.3</a> <em>(SPI Protocol)</em> of the AT86RF212 datasheet. The microcontroller has to be configured as SPI master in order to control the radio transceiver with the following primitives:<ul>
<li><a class="el" href="grpIntroTransceiverAccess.html#grpIntroRegister">Register read and write access</a></li><li><a class="el" href="grpIntroTransceiverAccess.html#grpIntroBuffer">Frame buffer read and write access</a></li><li><a class="el" href="grpIntroTransceiverAccess.html#secSRAM">SRAM read and write access</a></li><li><a class="el" href="grpIntroTransceiverAccess.html#secFast">AES module access</a></li></ul>
<h2><a class="anchor" name="secGPIO">
GPIO</a></h2>
<h3><a class="anchor" name="wirePinClkm">
Clock Pin TRX_PIN_CLKM</a></h3>
The pin CLKM (TRX_PIN_CLKM) can provide a clock signal, which is derived from the radio transceiver clock. This signal can be used as clock source for a timer or as main clock for the microcontroller.<h3><a class="anchor" name="wirePinIrq">
Interrupt Pin TRX_PIN_IRQ</a></h3>
The IRQ pin (TRX_PIN_IRQ) is an output pin of the radio transceiver and can be used as an interrupt source for the microcontroller. Per default it changes from LOW to HIGH, if an asynchronous radio transceiver event occurs and it stays at HIGH level, until the interrupt cause is determined by reading the register <a class="el" href="group__apiHalPHY212Reg.html#g7dec4b1e3d3bfd3e9f6c243abc4f008e">RG_IRQ_STATUS</a>. The polarity of the interrupt pin can be configured as described in <a class="el" href="grpIrqCfg.html#secirq_polarity">IRQ Polarity Configuration</a>.<h3><a class="anchor" name="wirePinSleepTr">
Control Pin TRX_PIN_SLP_TR</a></h3>
The function of the SLP_TR pin depends on the radio transceiver state. It has to be configured as an output pin of the microcontroller (see function <a class="el" href="group__apiHalFuncBasic.html#g7ffbe4411fb6d28f884fd3da4c206893">trx_pinset_slptr()</a>). The following effects occur when switching <a class="el" href="grpIntroMCU.html#wirePinSleepTr">TRX_PIN_SLP_TR</a>:<p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td align="center" width="20%>"><b>Transceiver Status</b> </td><td align="center" width="20%>"><b>Transition</b> </td><td align="center" width="20%>"><b>Description</b> </td><td align="center" width="20%>"><b>Pin behavior</b>  </td></tr>
<tr>
<td>PLL_ON  </td><td>L-&gt;H </td><td>Start a frame transmission </td><td>TRX_PIN_SLP_TR is only sensitive on the rising edge   </td></tr>
<tr>
<td>TX_ARET_ON </td><td>L-&gt;H </td><td>Start a TX_ARET transaction </td><td>TRX_PIN_SLP_TR is only sensitive on the rising edge   </td></tr>
<tr>
<td>TRX_OFF </td><td>L-&gt;H </td><td>Set the radio transceiver into state <a class="el" href="grpIntroStates.html#stSleep">SLEEP</a> and disable CLKM </td><td>only as long as the pin is logical high   </td></tr>
<tr>
<td>RX_ON </td><td>L-&gt;H </td><td>Set the radio transceiver into state <a class="el" href="grpIntroStates.html#stRxOnNoClk">RX_ON_NOCLK</a> and disable CLKM </td><td>only as long as the pin is logical high   </td></tr>
<tr>
<td>RX_AACK_ON </td><td>L-&gt;H </td><td>Set the radio transceiver into state <a class="el" href="grpIntroStates.html#stRxAackOn">RX_AACK_ON_NOCLK</a> and disables CLKM </td><td>only as long as the pin is logical high   </td></tr>
<tr>
<td>SLEEP </td><td>H-&gt;L </td><td>Set the radio transceiver back into state <a class="el" href="grpIntroStates.html#stTrxOff">TRX_OFF</a>, level sensitive </td><td>TRX_PIN_SLP_TR is only sensitive on the falling edge  </td></tr>
<tr>
<td>RX_ON_NOCLK </td><td>H-&gt;L </td><td>Set the radio transceiver into state <a class="el" href="grpIntroStates.html#stRxOn">RX_ON</a> and enable CLKM </td><td>fall back into <a class="el" href="grpIntroStates.html#stRxOn">RX_ON</a> with falling edge  </td></tr>
<tr>
<td>RX_AACK_ON_NOCLK </td><td>H-&gt;L </td><td>Set the radio transceiver into state <a class="el" href="grpIntroStates.html#stRxAackOn">RX_AACK_ON</a> and enable CLKM </td><td>fall back into RX_AACK_ON with falling edge   </td></tr>
</table>
<h3><a class="anchor" name="wirePinReset">
Control Pin TRX_PIN_RST</a></h3>
The low active /RST pin is used to reset the radio transceiver and has to be configured as an output pin of the microcontroller (see <a class="el" href="group__apiHalFuncBasic.html#gd368880e4639eddd32ae33d3b658c626">trx_pinset_reset</a>).<ul>
<li>If TRX_PIN_RST = LOW, the radio transceiver is hold in reset.</li><li>If TRX_PIN_RST = HIGH, the radio transceiver is released from reset.</li></ul>
<p>
During normal operation, this pin is set to HIGH.<h3><a class="anchor" name="wirePinDIG2">
Pin DIG2</a></h3>
The DIG2 pin has different functionalities depending on register settings:<p>
<table border="1" cellspacing="3" cellpadding="3">
<tr align="center">
<th><a class="el" href="group__apiHalPHY212Sreg.html#g05811ed876f3562f868c318d790babde">SR_ANT_EXT_SW_EN</a></th><th><a class="el" href="group__apiHalPHY212Sreg.html#gc2aee8dc611b535d563db8041df15ce0">SR_IRQ_2_EXT_EN</a></th><th>Function  </th></tr>
<tr align="center">
<td>0</td><td>0</td><td align="left">The pull-down resistor of pin DIG2 is enabled. </td></tr>
<tr align="center">
<td>0</td><td>1</td><td align="left">Signal IRQ_2 (RX_START) for <a class="el" href="grpRxtime.html">RX Frame Time Stamping</a> is enabled. </td></tr>
<tr align="center">
<td>1</td><td>0</td><td align="left"><a class="el" href="grpADiv.html">Antenna Diversity RF switch control</a> is active. </td></tr>
<tr align="center">
<td>1</td><td>1</td><td align="left">The <a class="el" href="grpRxtime.html">RX Frame Time Stamping</a> is enabled. </td></tr>
</table>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Aug 17 13:34:58 2009 for SWPM AT86RF212 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
