<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SWPM AT86RF212: Transitions to State RX_ON</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">AT86RF212 Programming</a>&nbsp;&raquo&nbsp;<a class="el" href="pgSwpmAT86RF212.html">Software Programming Model</a>&nbsp;&raquo&nbsp;<a class="el" href="grpState.html">State Changes</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="grpStateRxOn">Transitions to State RX_ON </a></h1>This section describes how the state <a class="el" href="grpIntroStates.html#stRxOn">RX_ON</a> is entered. In this state the receiver tries to detect IEEE 802.15.4 synchronization headers (<a class="el" href="grpPhyTx.html#refSHR">SHR</a>) on the configured RF channel. The state <a class="el" href="grpIntroStates.html#stRxOn">RX_ON</a> can generally be entered by writing the value <a class="el" href="group__apiHalPHY212Const.html#g5e4387f9db7294eb0e03a97505aac7c0">CMD_RX_ON</a> to the sub register <a class="el" href="group__apiHalPHY212Sreg.html#g8d912618842812f37fc46356eff73c93">SR_TRX_CMD</a>. The following state transitions are defined:<p>
<ul>
<li><a class="el" href="grpStateRxOn.html#secplme_set_trx_state_rxon_at_trxoff">PHY_STATE_TRX_OFF__RX_ON</a></li><li><a class="el" href="grpStateRxOn.html#secplme_set_trx_state_rxon_at_pll_active">PHY_STATE_PLL_ON__RX_ON</a></li><li><a class="el" href="grpStateRxOn.html#secplme_set_trx_state_rxon_at_busytx">PHY_STATE_BUSY_TX__RX_ON</a></li></ul>
<p>
<hr>
<h2><a class="anchor" name="secplme_set_trx_state_rxon_at_trxoff">
PHY_STATE_TRX_OFF__RX_ON</a></h2>
If the state <a class="el" href="group__apiHalPHY212Const.html#g359db88bcffa6b39bdb64ec00ec3a1ae">RX_ON</a> is requested from the state <a class="el" href="group__apiHalPHY212Const.html#gd9aff3d987888b9d1bcb9fc12d2c996e">TRX_OFF</a>, the PLL needs up to <a class="el" href="pgConst.html#tTR6">tTR6</a> to lock to the configured channel. The radio transceiver is only able to receive after the <a class="el" href="group__apiHalPHY212Const.html#g3a84434fef569c52df0df298c308e624">TRX_IRQ_PLL_LOCK</a> occured.<p>
<div align="center">
<img src="inline_mscgraph_43.png" alt="inline_mscgraph_43" border="0" usemap="#inline_mscgraph_43.map">
<map name="inline_mscgraph_43.map"><area href="grpIntroStates.html#stTrxOff" shape="rect" coords="430,26,470,39" alt="">
<area href="pgConst.html#tTR6" shape="rect" coords="160,69,189,82" alt="">
<area href="grpIntroStates.html#stRxOn" shape="rect" coords="436,151,464,164" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::TRX_OFF */</span>
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g8d912618842812f37fc46356eff73c93">SR_TRX_CMD</a>, <a class="code" href="group__apiHalPHY212Const.html#g5e4387f9db7294eb0e03a97505aac7c0">CMD_RX_ON</a>);
    delay(tTR6);
    <span class="comment">/* AT86RF212::RX_ON */</span>
    trxstat = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gbb9dcc6f85b1154d76645b5de64d4835">SR_TRX_STATUS</a>);
    ASSERT(trxstat==<a class="code" href="group__apiHalPHY212Const.html#g359db88bcffa6b39bdb64ec00ec3a1ae">RX_ON</a>);
</pre></div></dd></dl>
<h2><a class="anchor" name="secplme_set_trx_state_rxon_at_pll_active">
PHY_STATE_PLL_ON__RX_ON</a></h2>
If the state <a class="el" href="group__apiHalPHY212Const.html#g359db88bcffa6b39bdb64ec00ec3a1ae">RX_ON</a> is requested from state <a class="el" href="grpIntroStates.html#stPllOn">PLL_ON</a>, the transition occurs within <a class="el" href="pgConst.html#tTR8">tTR8</a>.<p>
<div align="center">
<img src="inline_mscgraph_44.png" alt="inline_mscgraph_44" border="0" usemap="#inline_mscgraph_44.map">
<map name="inline_mscgraph_44.map"><area href="grpIntroStates.html#stPllOn" shape="rect" coords="433,26,467,39" alt="">
<area href="pgConst.html#tTR8" shape="rect" coords="160,69,189,82" alt="">
<area href="grpIntroStates.html#stRxOn" shape="rect" coords="436,126,464,139" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::PLL_ON */</span>
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g8d912618842812f37fc46356eff73c93">SR_TRX_CMD</a>, <a class="code" href="group__apiHalPHY212Const.html#g5e4387f9db7294eb0e03a97505aac7c0">CMD_RX_ON</a>);
    delay(tTR8);
    <span class="comment">/* AT86RF212::RX_ON */</span>
    trxstat = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gbb9dcc6f85b1154d76645b5de64d4835">SR_TRX_STATUS</a>);
    ASSERT(trxstat==<a class="code" href="group__apiHalPHY212Const.html#g359db88bcffa6b39bdb64ec00ec3a1ae">RX_ON</a>);
</pre></div></dd></dl>
<h2><a class="anchor" name="secplme_set_trx_state_rxon_at_busytx">
PHY_STATE_BUSY_TX__RX_ON</a></h2>
If the command <a class="el" href="group__apiHalPHY212Const.html#g5e4387f9db7294eb0e03a97505aac7c0">CMD_RX_ON</a> is written to the sub register <a class="el" href="group__apiHalPHY212Sreg.html#g8d912618842812f37fc46356eff73c93">SR_TRX_CMD</a> and the radio transceiver is in the <a class="el" href="grpIntroStates.html#stTxBusy">BUSY_TX</a> state, the ongoing transmit transaction is completed and the state change to <a class="el" href="grpIntroStates.html#stRxOn">RX_ON</a> occurs right after the <a class="el" href="group__apiHalPHY212Const.html#ge34c1f5817526945d96c7cda6689f342">TRX_IRQ_TRX_END</a> interrupt.<p>
<div align="center">
<img src="inline_mscgraph_45.png" alt="inline_mscgraph_45" border="0" usemap="#inline_mscgraph_45.map">
<map name="inline_mscgraph_45.map"><area href="grpIntroStates.html#stTxBusy" shape="rect" coords="430,26,470,39" alt="">
<area href="grpIntroStates.html#stRxOn" shape="rect" coords="436,126,464,139" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::BUSY_TX */</span>
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g8d912618842812f37fc46356eff73c93">SR_TRX_CMD</a>, <a class="code" href="group__apiHalPHY212Const.html#g5e4387f9db7294eb0e03a97505aac7c0">CMD_RX_ON</a>);
    <span class="comment">/* TRX_IRQ_TRX_END occurs here */</span>
    <span class="comment">/* AT86RF212::RX_ON */</span>
    trxstat = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gbb9dcc6f85b1154d76645b5de64d4835">SR_TRX_STATUS</a>);
    ASSERT(trxstat==<a class="code" href="group__apiHalPHY212Const.html#g359db88bcffa6b39bdb64ec00ec3a1ae">RX_ON</a>);
</pre></div> </dd></dl>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Aug 17 13:35:00 2009 for SWPM AT86RF212 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
