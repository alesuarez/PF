<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SWPM AT86RF212: Transmit and Receive Interrupts</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">AT86RF212 Programming</a>&nbsp;&raquo&nbsp;<a class="el" href="pgSwpmAT86RF212.html">Software Programming Model</a>&nbsp;&raquo&nbsp;<a class="el" href="grpHandleIrq.html">Interrupts</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="grpIrqTrx">Transmit and Receive Interrupts </a></h1>Three different interrupt causes indicate the stages of the receive and transmit process:<ul>
<li><a class="el" href="group__apiHalPHY212Const.html#gab5ff5ca963c7556f4f1e0e37f045604">TRX_IRQ_RX_START</a> indicates the start of an <a class="el" href="pgRef.html#refeightohtwo154">IEEE 802.15.4</a> frame while receiving</li><li><a class="el" href="group__apiHalPHY212Const.html#gf6899ef98af446c018af6fa8d9f414dc">TRX_IRQ_AMI</a> indicates an address match during a receive process</li><li><a class="el" href="group__apiHalPHY212Const.html#ge34c1f5817526945d96c7cda6689f342">TRX_IRQ_TRX_END</a> indicates the end of a frame transmission or reception</li></ul>
<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>In order to activate those interrupts, <a class="el" href="group__apiHalPHY212Reg.html#g905b648376932649f2af990f20a03df6">RG_IRQ_MASK</a> has to be configured accordingly, as described in <a class="el" href="grpIrqCfg.html#secphy_irq_cfg">IRQ Mask Configuration</a>.</dd></dl>
<ul>
<li>IRQs for TX modes<ul>
<li><a class="el" href="grpIrqTrx.html#secphy_event_trxend_busytx">PHY_EVENT_TRX_END__BUSY_TX</a></li><li><a class="el" href="grpIrqTrx.html#secphy_event_trxend_busytxaret">PHY_EVENT_TRX_END__BUSY_TX_ARET</a></li></ul>
</li><li>IRQs for RX modes<ul>
<li><a class="el" href="grpIrqTrx.html#secphy_event_rxstart">PHY_EVENT_RX_START</a></li><li><a class="el" href="grpIrqTrx.html#secphy_event_ami">PHY_EVENT_AMI</a></li><li><a class="el" href="grpIrqTrx.html#secphy_event_trxend_busyrx">PHY_EVENT_TRX_END__BUSY_RX</a></li><li><a class="el" href="grpIrqTrx.html#secphy_event_trxend_busyrxaack">PHY_EVENT_TRX_END__BUSY_RX_AACK</a></li></ul>
</li></ul>
<p>
<hr>
<h2><a class="anchor" name="secphy_event_trxend_busytx">
PHY_EVENT_TRX_END__BUSY_TX</a></h2>
The end of a <a class="el" href="grpPhyTx.html">Frame Transmit Procedure (TX)</a> in Basic Operating Mode is signaled by the interrupt <a class="el" href="group__apiHalPHY212Const.html#ge34c1f5817526945d96c7cda6689f342">TRX_IRQ_TRX_END</a>. After the interrupt has occured, the radio transceiver changes its state per default to <a class="el" href="grpIntroStates.html#stPllOn">PLL_ON</a> or to one of the <a class="el" href="grpIntroStates.html#stCmd">[CMD]</a> states, if requested during the state <a class="el" href="grpIntroStates.html#stTxBusy">BUSY_TX</a> (see section <a class="el" href="grpState.html">State Changes</a>).<p>
<div align="center">
<img src="inline_mscgraph_57.png" alt="inline_mscgraph_57" border="0" usemap="#inline_mscgraph_57.map">
<map name="inline_mscgraph_57.map"><area href="grpIntroStates.html#stTxBusy" shape="rect" coords="430,26,470,39" alt="">
<area href="grpIntroStates.html#stPllOn" shape="rect" coords="433,101,467,114" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::BUSY_TX */</span>
    <span class="comment">/* TRX_IRQ_TRX_END occurs here */</span>
    <span class="comment">/* AT86RF212::PLL_ON &amp;&amp; MCU::ISR */</span>
    cause = <a class="code" href="group__apiHalFuncBasic.html#gd31a9a2f63e52d485d975d59f7c1d5f4" title="Read the value from a register.">trx_reg_read</a>(<a class="code" href="group__apiHalPHY212Reg.html#g7dec4b1e3d3bfd3e9f6c243abc4f008e">RG_IRQ_STATUS</a>);
    <span class="comment">/* MCU::ISR_TXEND */</span>
</pre></div></dd></dl>
<h2><a class="anchor" name="secphy_event_trxend_busytxaret">
PHY_EVENT_TRX_END__BUSY_TX_ARET</a></h2>
A transmission in the Extended Operating Mode includes automatic CSMA-CA, one or more frame retransmissions if needed and the processing of a received acknowledgment frame, if it was requested in the frame sent.<p>
The end of a <a class="el" href="grpRf212AutoTx.html">TX_ARET transaction</a> is always signaled with the interrupt <a class="el" href="group__apiHalPHY212Const.html#ge34c1f5817526945d96c7cda6689f342">TRX_IRQ_TRX_END</a>. In order to obtain the outcome of the transaction, the sub register <a class="el" href="group__apiHalPHY212Sreg.html#g4692d9ea2770ff145d1c35c513cbf1d6">SR_TRAC_STATUS</a> needs to be read and evaluated as described in <a class="el" href="grpRf212AutoTx.html#secphy_data_request_autotx_aret">PHY_DATA_REQUEST_TX_ARET</a>. After the interrupt has occured, the radio transceiver changes its state per default to <a class="el" href="grpIntroStates.html#stTxAretOn">TX_ARET_ON</a> or to one of the <a class="el" href="grpIntroStates.html#stCmd">[CMD]</a> states, if requested during state <a class="el" href="grpIntroStates.html#stTxAretBusy">BUSY_TX_ARET</a> (see section <a class="el" href="grpState.html">State Changes</a>).<p>
<div align="center">
<img src="inline_mscgraph_58.png" alt="inline_mscgraph_58" border="0" usemap="#inline_mscgraph_58.map">
<map name="inline_mscgraph_58.map"><area href="grpIntroStates.html#stTxAretBusy" shape="rect" coords="415,26,485,39" alt="">
<area href="grpIntroStates.html#stTxAretOn" shape="rect" coords="421,101,479,114" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::BUSY_TX_ARET */</span>
    <span class="comment">/* TRX_IRQ_TRX_END occurs here */</span>
    <span class="comment">/* AT86RF212::TX_ARET_ON &amp;&amp; MCU::ISR */</span>
    cause = <a class="code" href="group__apiHalFuncBasic.html#gd31a9a2f63e52d485d975d59f7c1d5f4" title="Read the value from a register.">trx_reg_read</a>(<a class="code" href="group__apiHalPHY212Reg.html#g7dec4b1e3d3bfd3e9f6c243abc4f008e">RG_IRQ_STATUS</a>);
    tracstat = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g4692d9ea2770ff145d1c35c513cbf1d6">SR_TRAC_STATUS</a>);
    <span class="comment">/* MCU::ISR_TXARETEND */</span>
</pre></div></dd></dl>
<h2><a class="anchor" name="secphy_event_rxstart">
PHY_EVENT_RX_START</a></h2>
The interrupt <a class="el" href="group__apiHalPHY212Const.html#gab5ff5ca963c7556f4f1e0e37f045604">TRX_IRQ_RX_START</a> signals that the radio transceiver has received a valid SHR and the frame length value in the PHR field is larger than 0.<p>
<div align="center">
<img src="inline_mscgraph_59.png" alt="inline_mscgraph_59" border="0" usemap="#inline_mscgraph_59.map">
<map name="inline_mscgraph_59.map"><area href="grpIntroStates.html#stRxActive" shape="rect" coords="418,26,482,39" alt="">
<area href="grpIntroStates.html#stTrxRXBusy" shape="rect" coords="424,101,476,114" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::[RX_ACTIVE] */</span>
    <span class="comment">/* TRX_IRQ_RX_START occurs here */</span>
    <span class="comment">/* AT86RF212::[RX_BUSY] &amp;&amp; MCU::ISR */</span>
    cause = <a class="code" href="group__apiHalFuncBasic.html#gd31a9a2f63e52d485d975d59f7c1d5f4" title="Read the value from a register.">trx_reg_read</a>(<a class="code" href="group__apiHalPHY212Reg.html#g7dec4b1e3d3bfd3e9f6c243abc4f008e">RG_IRQ_STATUS</a>);
    <span class="comment">/* MCU::ISR_RXSTART */</span>
</pre></div></dd></dl>
<h2><a class="anchor" name="secphy_event_ami">
PHY_EVENT_AMI</a></h2>
A <a class="el" href="group__apiHalPHY212Const.html#gf6899ef98af446c018af6fa8d9f414dc">TRX_IRQ_AMI</a> interrupt is issued, if the addressing field of the incoming frame matches the node's address according to the filter rules described in <a class="el" href="pgRef.html#refDataSheet">section 6.2</a> <em>(Frame Filter)</em> of the AT86RF212 datasheet.<p>
<div align="center">
<img src="inline_mscgraph_60.png" alt="inline_mscgraph_60" border="0" usemap="#inline_mscgraph_60.map">
<map name="inline_mscgraph_60.map"><area href="grpIntroStates.html#stTrxRXBusy" shape="rect" coords="424,26,476,39" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::[RX_BUSY] */</span>
    <span class="comment">/* TRX_IRQ_AMI occurs here */</span>
    <span class="comment">/* MCU::ISR */</span>
    cause = <a class="code" href="group__apiHalFuncBasic.html#gd31a9a2f63e52d485d975d59f7c1d5f4" title="Read the value from a register.">trx_reg_read</a>(<a class="code" href="group__apiHalPHY212Reg.html#g7dec4b1e3d3bfd3e9f6c243abc4f008e">RG_IRQ_STATUS</a>);
    <span class="comment">/* MCU::ISR_AMI */</span>
</pre></div></dd></dl>
<h2><a class="anchor" name="secphy_event_trxend_busyrx">
PHY_EVENT_TRX_END__BUSY_RX</a></h2>
The interrupt <a class="el" href="group__apiHalPHY212Const.html#ge34c1f5817526945d96c7cda6689f342">TRX_IRQ_TRX_END</a> occurs at the end of a <a class="el" href="grpPhyRx.html">Frame Receive Procedure (RX)</a> in Basic Operating Mode. After the interrupt has occured, the radio transceiver changes its state per default to <a class="el" href="grpIntroStates.html#stRxOn">RX_ON</a> or to one of the <a class="el" href="grpIntroStates.html#stCmd">[CMD]</a> states, if requested during the state <a class="el" href="grpIntroStates.html#stRxBusy">BUSY_RX</a> (see section <a class="el" href="grpState.html">State Changes</a>).<p>
<div align="center">
<img src="inline_mscgraph_61.png" alt="inline_mscgraph_61" border="0" usemap="#inline_mscgraph_61.map">
<map name="inline_mscgraph_61.map"><area href="grpIntroStates.html#stRxBusy" shape="rect" coords="430,26,470,39" alt="">
<area href="grpIntroStates.html#stRxOn" shape="rect" coords="436,101,464,114" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::BUSY_RX */</span>
    <span class="comment">/* TRX_IRQ_TRX_END occurs here */</span>
    <span class="comment">/* MCU::ISR &amp;&amp; AT86RF212::RX_ON */</span>
    cause = <a class="code" href="group__apiHalFuncBasic.html#gd31a9a2f63e52d485d975d59f7c1d5f4" title="Read the value from a register.">trx_reg_read</a>(<a class="code" href="group__apiHalPHY212Reg.html#g7dec4b1e3d3bfd3e9f6c243abc4f008e">RG_IRQ_STATUS</a>);
    <span class="comment">/* MCU::ISR_RXEND */</span>
</pre></div></dd></dl>
<h2><a class="anchor" name="secphy_event_trxend_busyrxaack">
PHY_EVENT_TRX_END__BUSY_RX_AACK</a></h2>
The end of a <a class="el" href="grpRf212AutoRx.html">frame reception</a> in Extended Operating Mode (RX_AACK) is only signaled with the interrupt <a class="el" href="group__apiHalPHY212Const.html#ge34c1f5817526945d96c7cda6689f342">TRX_IRQ_TRX_END</a>, if the received frame matches the settings in the address filter and has a valid FCS. After the interrupt has occured, the radio transceiver changes its state per default to <a class="el" href="grpIntroStates.html#stRxAackOn">RX_AACK_ON</a> or to one of the <a class="el" href="grpIntroStates.html#stCmd">[CMD]</a> states, if requested during the state <a class="el" href="grpIntroStates.html#stRxAackBusy">BUSY_RX_AACK</a> (see section <a class="el" href="grpState.html">State Changes</a>).<p>
The behavior of an RX_AACK transaction for a node in slotted operation is described in <a class="el" href="grpRf212AutoRx.html#secphy_data_indication_autorx_slotted">PHY_DATA_INDICATION_RX_AACK_SLOTTED</a>.<p>
<div align="center">
<img src="inline_mscgraph_62.png" alt="inline_mscgraph_62" border="0" usemap="#inline_mscgraph_62.map">
<map name="inline_mscgraph_62.map"><area href="grpIntroStates.html#stRxAackBusy" shape="rect" coords="415,26,485,39" alt="">
<area href="grpIntroStates.html#stRxAackOn" shape="rect" coords="421,126,479,139" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::BUSY_RX_AACK */</span>
    <span class="comment">/* TRX_IRQ_TRX_END occurs here */</span>
    <span class="comment">/* MCU::ISR &amp;&amp; AT86RF212::RX_AACK_ON */</span>
    cause = <a class="code" href="group__apiHalFuncBasic.html#gd31a9a2f63e52d485d975d59f7c1d5f4" title="Read the value from a register.">trx_reg_read</a>(<a class="code" href="group__apiHalPHY212Reg.html#g7dec4b1e3d3bfd3e9f6c243abc4f008e">RG_IRQ_STATUS</a>);
    <span class="comment">/* MCU::ISR_RXAACKEND */</span>
</pre></div> </dd></dl>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Aug 17 13:35:00 2009 for SWPM AT86RF212 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
