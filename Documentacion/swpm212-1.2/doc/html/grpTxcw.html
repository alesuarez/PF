<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SWPM AT86RF212: Continuous Transmission Test Mode</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">AT86RF212 Programming</a>&nbsp;&raquo&nbsp;<a class="el" href="pgSwpmAT86RF212.html">Software Programming Model</a>&nbsp;&raquo&nbsp;<a class="el" href="grpTest.html">Test and Production Support</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="grpTxcw">Continuous Transmission Test Mode </a></h1>This section describes how the radio transceiver can be forced to transmit single tone (CW <em>continuous wave</em>) and random signals (PRBS). This test mode can be used for RF related measurements (TX power, harmonics) and other test purposes. For further details refer to <a class="el" href="pgRef.html#refDataSheet">appendix A</a> <em>(Continuous Transmission Test Mode)</em> of the AT86RF212 datasheet.<p>
The sequences for continuous wave (CW) transmission using the <a class="el" href="grpHRate.html">High Data Rate Modes</a>.<p>
<a class="anchor" name="parm_txdata"></a> <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>txdata</em>&nbsp;</td><td>The data in this array define the generated test signal.<br>
 <b>CW mode:</b> If <code>txdata</code> consists of homogenuous values {0x00} or {0xff} and <a class="el" href="grpTxcw.html#parm_scramen">scramen</a>=0, a single tone signal is generated:<br>
<br>
 <table border="1" cellspacing="3" cellpadding="3">
<tr>
<th>txdata </th><th>mode </th><th>CW frequency </th></tr>
<tr>
<td>all bytes 0x00 </td><td>O-QPSK_1000 </td><td>fCH - 0.25 MHz </td></tr>
<tr>
<td>all bytes 0xFF </td><td>O-QPSK_1000 </td><td>fCH + 0.25 MHz </td></tr>
<tr>
<td>all bytes 0x00 </td><td>O-QPSK_400 </td><td>fCH - 0.1 MHz </td></tr>
<tr>
<td>all bytes 0xFF </td><td>O-QPSK_400 </td><td>fCH + 0.1 MHz </td></tr>
</table>
<br>
 <b>PRBS mode:</b> A modulated RF signal is generated, if <code>txdata</code> consists of inhomogenous (random) values. If an IEEE 802.15.4 synchronization header (SHR: <code>0,0,0,0,0xA7</code>) is included in the <code>txdata</code> array, the continuous transmission can be recognized by a receiver as a loop of individual IEEE 802.15.4 frames.<br>
<br>
 <a class="anchor" name="parm_scramen"></a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>scramen</em>&nbsp;</td><td>{1} generate a PRBS signal (scrambler enabled), {0} generate a single tone signal (scrambler disabled). <a class="anchor" name="parm_submode"></a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>submode</em>&nbsp;</td><td>{1} selects O-QPSK_1000 and <img class="formulaInl" alt="$\pm$" src="form_1.png"> 0.25 MHz distance to the channel frequency, <br>
 {0} chooses O-QPSK_400 and <img class="formulaInl" alt="$\pm$" src="form_1.png"> 0.1 MHz distance to the channel frequency <a class="anchor" name="parm_channel"></a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>channel</em>&nbsp;</td><td>Current channel (fCH) to use for continuous transmission (see <a class="el" href="grpSetChanFreq.html#secphy_set_current_channel">PHY_SET_CHANNEL</a>). <a class="anchor" name="parm_txpower"></a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>txpower</em>&nbsp;</td><td>The power level index selected from <a class="el" href="pgRef.html#refDataSheet">table 7-15</a> <em>(Recommended Mapping of TX Power, Frequency Band, and PHY_TX_PWR)</em> of the AT86RF212 datasheet (see <a class="el" href="grpSetPwr.html#secphy_set_transmit_power">PHY_SET_TRANSMIT_POWER</a>).</td></tr>
  </table>
</dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd><br>
<small><b>&gt;&gt;</b></small>&nbsp; The data array <a class="el" href="grpTxcw.html#parm_txdata">txdata</a> is written to the transceiver as PSDU data with the <a class="el" href="group__apiHalFuncBasic.html#g9191fea0f277cb46af5ad28b67a6356d">trx_frame_write()</a> function, therefore it has a maximum length of 127 bytes. <br>
<small><b>&gt;&gt;</b></small>&nbsp; Alternatively of using the <a class="el" href="grpSetChanFreq.html#secSetChan">IEEE channels</a>, the continuous transmission test mode can also be used in conjunction with the <a class="el" href="grpSetChanFreq.html#secSetFreq">user-defined RF channels</a>. <br>
<small><b>&gt;&gt;</b></small>&nbsp; Instead of using the <a class="el" href="grpPhyTx.html#secphy_data_request_regstart">register start</a> method, also the <a class="el" href="grpPhyTx.html#secphy_data_request_pinstart">pin start</a> method can be used.</dd></dl>
<b>Use Cases:</b><ul>
<li><a class="el" href="grpTxcw.html#secphy_cont_tx_cw_regstart">PHY_CONT_TX_CW_REGSTART</a></li><li><a class="el" href="grpTxcw.html#secphy_cont_tx_stop">PHY_CONT_TX_STOP</a></li></ul>
<p>
<hr>
<h2><a class="anchor" name="secphy_cont_tx_cw_regstart">
PHY_CONT_TX_CW_REGSTART</a></h2>
This sequence describes the transmission of a continuous test signal. Depending on the parameter <a class="el" href="grpTxcw.html#parm_scramen">scramen</a> a CW signal or a PRBS signal is generated.<p>
<div align="center">
<img src="inline_mscgraph_115.png" alt="inline_mscgraph_115" border="0" usemap="#inline_mscgraph_115.map">
<map name="inline_mscgraph_115.map"><area href="grpIntroStates.html#stTrxOff" shape="rect" coords="430,26,470,39" alt="">
<area href="pgConst.html#tTR4" shape="rect" coords="160,369,189,382" alt="">
<area href="grpIntroStates.html#stPllOn" shape="rect" coords="433,451,467,464" alt="">
<area href="grpIntroStates.html#stTxBusy" shape="rect" coords="430,501,470,514" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::TRX_OFF */</span>
    <a class="code" href="group__apiHalFuncBasic.html#g63cd512542173c0a69f2ead0890defed" title="Write a value to a register.">trx_reg_write</a>(<a class="code" href="group__apiHalPHY212Reg.html#g905b648376932649f2af990f20a03df6">RG_IRQ_MASK</a>, <a class="code" href="group__apiHalPHY212Const.html#g3a84434fef569c52df0df298c308e624" title="PLL goes to lock-state.">TRX_IRQ_PLL_LOCK</a>);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g53420a51ab0ad2e5b108d5cbbdf6f3b6">SR_TX_AUTO_CRC_ON</a>, 0);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g4b9bff87f5d63f845e3fad83286624db">SR_CHANNEL</a>, channel);
    <a class="code" href="group__apiHalFuncBasic.html#g63cd512542173c0a69f2ead0890defed" title="Write a value to a register.">trx_reg_write</a>(<a class="code" href="group__apiHalPHY212Reg.html#g102bbda4e4354e6c5d42d73a8202476d">RG_PHY_TX_PWR</a>, txpower);
    <a class="code" href="group__apiHalFuncBasic.html#g63cd512542173c0a69f2ead0890defed" title="Write a value to a register.">trx_reg_write</a>(0x36, 15);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gfea05e8ee180669eddbcff4f4697ccdc">SR_BPSK_OQPSK</a>, 1);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gbfeb28eda159177c144821fd6fef7bb0">SR_OQPSK_DATA_RATE</a>, 3);
    <a class="code" href="group__apiHalFuncBasic.html#g63cd512542173c0a69f2ead0890defed" title="Write a value to a register.">trx_reg_write</a>(RG_OQPSK_SCRAM_EN, scramen);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gb5a877701d2e8f032a2fe02a8781c1bb">SR_SUB_MODE</a>, submode);
    <a class="code" href="group__apiHalFuncBasic.html#g9191fea0f277cb46af5ad28b67a6356d" title="Write a frame to the radio transceiver.">trx_frame_write</a>(len(txdata), txdata);
    <a class="code" href="group__apiHalFuncBasic.html#g63cd512542173c0a69f2ead0890defed" title="Write a value to a register.">trx_reg_write</a>(<a class="code" href="group__apiHalPHY212Reg.html#g72ebcdb3490edf9a0af95c5feba492fc">RG_PART_NUM</a>, 84);
    <a class="code" href="group__apiHalFuncBasic.html#g63cd512542173c0a69f2ead0890defed" title="Write a value to a register.">trx_reg_write</a>(<a class="code" href="group__apiHalPHY212Reg.html#g72ebcdb3490edf9a0af95c5feba492fc">RG_PART_NUM</a>, 70);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g8d912618842812f37fc46356eff73c93">SR_TRX_CMD</a>, <a class="code" href="group__apiHalPHY212Const.html#g86eb3f35dbb0833379e005d0a934ed95">CMD_PLL_ON</a>);
    delay(tTR4);
    <span class="comment">/* AT86RF212::PLL_ON */</span>
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g8d912618842812f37fc46356eff73c93">SR_TRX_CMD</a>, <a class="code" href="group__apiHalPHY212Const.html#gd47eb7bbddce76aba1a636d6b2344997">CMD_TX_START</a>);
    <span class="comment">/* AT86RF212::BUSY_TX */</span>
</pre></div></dd></dl>
<h2><a class="anchor" name="secphy_cont_tx_stop">
PHY_CONT_TX_STOP</a></h2>
This sequence stops the <a class="el" href="grpTxcw.html">Continuous Transmission Test Mode</a>. It is recommended to perform a reset after stopping this mode (see also <a class="el" href="grpPhyReset.html#secreset">TRX_RESET</a>).<p>
<div align="center">
<img src="inline_mscgraph_116.png" alt="inline_mscgraph_116" border="0" usemap="#inline_mscgraph_116.map">
<map name="inline_mscgraph_116.map"><area href="grpIntroStates.html#stTxBusy" shape="rect" coords="430,26,470,39" alt="">
<area href="pgConst.html#t10" shape="rect" coords="160,119,183,132" alt="">
<area href="pgConst.html#tTR13" shape="rect" coords="160,194,195,207" alt="">
<area href="grpIntroStates.html#stTrxOff" shape="rect" coords="430,251,470,264" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::BUSY_TX */</span>
    <a class="code" href="group__apiHalFuncBasic.html#g63cd512542173c0a69f2ead0890defed" title="Write a value to a register.">trx_reg_write</a>(<a class="code" href="group__apiHalPHY212Reg.html#g72ebcdb3490edf9a0af95c5feba492fc">RG_PART_NUM</a>, 0);
    <a class="code" href="group__apiHalFuncBasic.html#gd368880e4639eddd32ae33d3b658c626" title="Set the level of the RESET pin.">trx_pinset_reset</a>(0);
    <a class="code" href="group__apiHalFuncBasic.html#g7ffbe4411fb6d28f884fd3da4c206893" title="Set the level of the SLP_TR pin.">trx_pinset_slptr</a>(0);
    delay(t10);
    <a class="code" href="group__apiHalFuncBasic.html#gd368880e4639eddd32ae33d3b658c626" title="Set the level of the RESET pin.">trx_pinset_reset</a>(1);
    delay(tTR13);
    <span class="comment">/* AT86RF212::TRX_OFF */</span>
</pre></div> </dd></dl>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Aug 17 13:35:02 2009 for SWPM AT86RF212 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
