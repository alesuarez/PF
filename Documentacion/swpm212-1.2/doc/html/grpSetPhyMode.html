<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SWPM AT86RF212: Physical Layer Mode</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">AT86RF212 Programming</a>&nbsp;&raquo&nbsp;<a class="el" href="pgSwpmAT86RF212.html">Software Programming Model</a>&nbsp;&raquo&nbsp;<a class="el" href="grpCfg.html">Radio Transceiver Configuration</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="grpSetPhyMode">Physical Layer Mode </a></h1>The radio transceiver supports BPSK and O-QPSK modulation at different data rates, described in <a class="el" href="pgRef.html#refDataSheet">section 7.1</a> <em>(Physical Layer Modes)</em> and <a class="el" href="pgRef.html#refDataSheet">table 7-5</a> <em>(Register 0x0C (TRX_CTRL_2) Bit Alignment)</em> of the AT86RF212 datasheet.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>In order to change the physical layer mode, the radio transceiver <b>has to be</b> in state <a class="el" href="grpIntroStates.html#stTrxOff">TRX_OFF</a> (see also section <a class="el" href="grpStateTrxOff.html">Transitions to State TRX_OFF</a>).</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>useoqpsk</em>&nbsp;</td><td>values {0,1}, see <a class="el" href="grpSetPhyMode.html#secPhyModeParms">table</a> below. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>submode</em>&nbsp;</td><td>values {0,1}, see <a class="el" href="grpSetPhyMode.html#secPhyModeParms">table</a> below. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>oqpskrate</em>&nbsp;</td><td>values {0,1,2}, see <a class="el" href="grpSetPhyMode.html#secPhyModeParms">table</a> below. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>scramen</em>&nbsp;</td><td>scrambler configuration for O-QPSK_{400,1000}; values { 0: disabled, 1: enabled (default)}. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rcen</em>&nbsp;</td><td>transmit signal pulse shaping for O-QPSK_{250,500,1000}; values {0 : half-sine filtering (default), 1 : RC-0.8 filtering}. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gctxoffset</em>&nbsp;</td><td>offset value for the TX output power. Since this <a class="el" href="grpSetPwr.html">transmit power</a> configuration parameter depends on the selected modulation, it is set in this sequence to the values {3} for BPSK and {2} for O-QPSK. For more details refer to <a class="el" href="pgRef.html#refDataSheet">table 7-16</a> <em>(Mode-dependent setting of GC_TX_OFFS)</em> in the AT86RF212 datasheet.</td></tr>
  </table>
</dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>The parameters <code>scramen</code> and <code>rcen</code> shall be set according to <a class="el" href="pgRef.html#refDataSheet">table 7-5</a> <em>(Register 0x0C (TRX_CTRL_2) Bit Alignment)</em> of the AT86RF212 datasheet in order to configure standard compliant modes.</dd></dl>
<h2><a class="anchor" name="secPhyModeParms">
Combinations of PHY Layer Mode Parameters</a></h2>
(see also <a class="el" href="pgRef.html#refDataSheet">table 7-5</a> <em>(Register 0x0C (TRX_CTRL_2) Bit Alignment)</em> of the AT86RF212 datasheet)<p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<th>Mode</th><th>useoqpsk</th><th>submode</th><th>oqpskrate </th></tr>
<tr>
<td>BPSK_20</td><td>0</td><td>0</td><td>X </td></tr>
<tr>
<td>BPSK_40</td><td>0</td><td>1</td><td>X </td></tr>
<tr>
<td>O-QPSK_100</td><td>1</td><td>0</td><td>0 </td></tr>
<tr>
<td>O-QPSK_200</td><td>1</td><td>0</td><td>1 </td></tr>
<tr>
<td>O-QPSK_400</td><td>1</td><td>0</td><td>2 </td></tr>
<tr>
<td>O-QPSK_250</td><td>1</td><td>1</td><td>0 </td></tr>
<tr>
<td>O-QPSK_500</td><td>1</td><td>1</td><td>1 </td></tr>
<tr>
<td>O-QPSK_1000</td><td>1</td><td>1</td><td>2 </td></tr>
</table>
<p>
<b>Use Cases:</b><ul>
<li><a class="el" href="grpSetPhyMode.html#secset_phy_mode">SET_PHY_MODE</a></li><li><a class="el" href="grpSetPhyMode.html#secget_phy_mode">GET_PHY_MODE</a></li><li>see also <a class="el" href="grpHRate.html#secset_hrm_mode">SET_HRM_MODE</a> and <a class="el" href="grpHRate.html#secget_hrm_mode">GET_HRM_MODE</a></li></ul>
<p>
<hr>
<h2><a class="anchor" name="secset_phy_mode">
SET_PHY_MODE</a></h2>
The modulation and PSDU data rate of the radio transceiver can be set using the following sequence.<p>
<div align="center">
<img src="inline_mscgraph_8.png" alt="inline_mscgraph_8" border="0" usemap="#inline_mscgraph_8.map">
<map name="inline_mscgraph_8.map"><area href="grpIntroStates.html#stTrxOff" shape="rect" coords="430,26,470,39" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::TRX_OFF */</span>
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gfea05e8ee180669eddbcff4f4697ccdc">SR_BPSK_OQPSK</a>, useoqpsk);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gb5a877701d2e8f032a2fe02a8781c1bb">SR_SUB_MODE</a>, submode);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gbfeb28eda159177c144821fd6fef7bb0">SR_OQPSK_DATA_RATE</a>, oqpskrate);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g3f5943f483ff040543c707263fc7c4d3">SR_OQPSK_SCRAM_EN</a>, scramen);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g6751c2f3f09c9bab997142a267b6ee49">SR_OQPSK_SUB1_RC_EN</a>, rcen);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#geb31431d7da7cdc4ce2362cc4fe18ba5">SR_GC_TX_OFFS</a>, gctxoffset);
</pre></div></dd></dl>
<h2><a class="anchor" name="secget_phy_mode">
GET_PHY_MODE</a></h2>
<div align="center">
<img src="inline_mscgraph_9.png" alt="inline_mscgraph_9" border="0" usemap="#inline_mscgraph_9.map">
<map name="inline_mscgraph_9.map"><area href="grpIntroStates.html#stTrxActive" shape="rect" coords="427,26,473,39" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* AT86RF212::[ACTIVE] */</span>
    useoqpsk = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gfea05e8ee180669eddbcff4f4697ccdc">SR_BPSK_OQPSK</a>);
    submode = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gb5a877701d2e8f032a2fe02a8781c1bb">SR_SUB_MODE</a>);
    oqpskrate = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gbfeb28eda159177c144821fd6fef7bb0">SR_OQPSK_DATA_RATE</a>);
    scramen = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g3f5943f483ff040543c707263fc7c4d3">SR_OQPSK_SCRAM_EN</a>);
    rcen = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g6751c2f3f09c9bab997142a267b6ee49">SR_OQPSK_SUB1_RC_EN</a>);
    gctxoffset = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#geb31431d7da7cdc4ce2362cc4fe18ba5">SR_GC_TX_OFFS</a>);
</pre></div> </dd></dl>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Aug 17 13:34:59 2009 for SWPM AT86RF212 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
