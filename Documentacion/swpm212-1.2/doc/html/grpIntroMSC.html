<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SWPM AT86RF212: Message Sequence Charts</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">AT86RF212 Programming</a>&nbsp;&raquo&nbsp;<a class="el" href="pgSwpmAT86RF212.html">Software Programming Model</a>&nbsp;&raquo&nbsp;<a class="el" href="grpIntro.html">Introduction</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="grpIntroMSC">Message Sequence Charts </a></h1>A Message Sequence Chart (MSC) is a representation method for an <em>use case</em>. It shows the time sequential order of events and transactions between several entities. The example below consists of the entities <b>e1</b> and <b>e2</b>. At first the entity <b>e2</b> is in the state <code></code>[S]. Entity <b>e1</b> sends the event <code>bar()</code> to entity <b>e2</b>. The timer <code>t1</code> is started as reaction to the event <code>bar()</code> at entity <b>e2</b>. When timer <code>t1</code> expires 10ms later, entity <b>e2</b> sends an event <code>BAR_END</code> back to entity <b>e1</b>. After this event entity <b>e2</b> is in state <code></code>[E].<p>
<div align="center">
<img src="inline_mscgraph_1.png" alt="inline_mscgraph_1" border="0" usemap="#inline_mscgraph_1.map">
<map name="inline_mscgraph_1.map"></map>
</div>
<p>
More information about MSCs can be found in the section <a class="el" href="pgRef.html#refmsc">References</a>.<p>
The MSCs used in this manual consist of two entities, the first entity MCU refers to the programm, running on the microcontroller and the entity AT86RF212 refers to the radio transceiver. At the end of each MSC there are C-Code fragments, which show the sequence of the function calls for the current use case. These code fragments just show a time sequential order of function calls but they do not describe a valid driver implementation for the radio transceiver.<p>
The following diagrams explain the MSC primitives, which are used in this manual:<p>
<ul>
<li><a class="el" href="grpIntroMSC.html#secmsc_trx_access">MSC_TRX_ACCESS</a></li><li><a class="el" href="grpIntroMSC.html#secmsc_trx_irq">MSC_TRX_IRQ_TMR_ASSERT</a></li></ul>
<h2><a class="anchor" name="secmsc_trx_access">
MSC_TRX_ACCESS</a></h2>
This sequence shows the primitives, which are used to access the radio transceiver from the MCU via the <a class="el" href="grpIntroMCU.html">control interface</a>. The following actions can be performed:<ul>
<li><code></code>[pin] : Setting levels of control pins.</li><li><code></code>[reg] : Read and write <a class="el" href="grpIntroTransceiverAccess.html#parReg">registers</a>.</li><li><code></code>[sreg] : Read and write <a class="el" href="grpIntroTransceiverAccess.html#parSReg">sub registers</a>.</li><li><code></code>[frm] : Read and write frames.</li><li><code></code>[sram] : Read and write the SRAM.</li><li><code></code>[aes] : Read and write the AES block.</li></ul>
<p>
<div align="center">
<img src="inline_mscgraph_2.png" alt="inline_mscgraph_2" border="0" usemap="#inline_mscgraph_2.map">
<map name="inline_mscgraph_2.map"></map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* MCU::[pin] &amp;&amp; AT86RF212::... */</span>
    <a class="code" href="group__apiHalFuncBasic.html#gd368880e4639eddd32ae33d3b658c626" title="Set the level of the RESET pin.">trx_pinset_reset</a>(0);
    <a class="code" href="group__apiHalFuncBasic.html#g7ffbe4411fb6d28f884fd3da4c206893" title="Set the level of the SLP_TR pin.">trx_pinset_slptr</a>(0);
    <span class="comment">/* MCU::[reg] */</span>
    irqstat = <a class="code" href="group__apiHalFuncBasic.html#gd31a9a2f63e52d485d975d59f7c1d5f4" title="Read the value from a register.">trx_reg_read</a>(<a class="code" href="group__apiHalPHY212Reg.html#g7dec4b1e3d3bfd3e9f6c243abc4f008e">RG_IRQ_STATUS</a>);
    <a class="code" href="group__apiHalFuncBasic.html#g63cd512542173c0a69f2ead0890defed" title="Write a value to a register.">trx_reg_write</a>(<a class="code" href="group__apiHalPHY212Reg.html#g905b648376932649f2af990f20a03df6">RG_IRQ_MASK</a>, mask);
    <span class="comment">/* MCU::[sreg] */</span>
    val = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gbb9dcc6f85b1154d76645b5de64d4835">SR_TRX_STATUS</a>);
    <a class="code" href="group__apiHalFuncBasic.html#g4a22a30602ea72effde4450ce80a6480" title="Write a value to a subregister.">trx_bit_write</a>(<a class="code" href="group__apiHalPHY212Sreg.html#g8d912618842812f37fc46356eff73c93">SR_TRX_CMD</a>, <a class="code" href="group__apiHalPHY212Const.html#g8ecc63755abb125691b00426cba7fe41">CMD_FORCE_TRX_OFF</a>);
    <span class="comment">/* MCU::[frm] */</span>
    rxframe = <a class="code" href="group__apiHalFuncBasic.html#g88ff4f45a0c4c7435d686150cc7fb4c2" title="Read a frame from the radio transceiver.">trx_frame_read</a>();
    <a class="code" href="group__apiHalFuncBasic.html#g9191fea0f277cb46af5ad28b67a6356d" title="Write a frame to the radio transceiver.">trx_frame_write</a>(len(txframe), txframe);
    <span class="comment">/* MCU::[sram] */</span>
    <a class="code" href="group__apiHalFuncBasic.html#g9cefef2438958ba66d3696eb01aa8470" title="Read data from SRAM.">trx_sram_read</a>(len, addr, var);
    <a class="code" href="group__apiHalFuncBasic.html#gfd63982d9050e370d586937c6f8f6cb6" title="Write data to SRAM.">trx_sram_write</a>(array_var);
    <span class="comment">/* MCU::[aes] */</span>
    <a class="code" href="group__apiHalFuncBasic.html#g80132a40aa746cff703fdfc242360581" title="Write data to the AES block.">trx_aes_write</a>(aescon, 1, idata1);
    <a class="code" href="group__apiHalFuncBasic.html#g6da4dc8ef15aea804539e3c626644cd7" title="Write and read data from AES block simultaneously.">trx_aes_wrrd</a>(aescon, 1, idata2, odata);
    <a class="code" href="group__apiHalFuncBasic.html#g53c5a480cc77c15e61d5b6582070d944" title="Read data from AES block.">trx_aes_read</a>(aescon, odataN);
</pre></div></dd></dl>
<h2><a class="anchor" name="secmsc_trx_irq">
MSC_TRX_IRQ_TMR_ASSERT</a></h2>
This sequence shows the primitives, which are used to describe the interrupt and timer handling as well as assertions, which are used for the verification of parameters.<ul>
<li><code></code>[tmr] : A defined time, which needs to be waited until the result of a transaction or event is available. Those timer values can be defined as either numeric values or as predefined constants.</li><li><code></code>[waitirq] : An IRQ, that has to occur within a determined time.</li><li><code></code>[tmrorirq] : Wait until the timer expires or until the specified interrupt occurs</li><li><code></code>[tmraccess]: A defined action, e.g. a register access, has to be executed within a determined time.</li><li><code></code>[async] : An interrupt that occurs asynchronously, like in the frame receive event.</li><li><code></code>[assert] : A parameter which is checked against a register value from the radio transceiver.</li></ul>
<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>All timer descriptions are listed in section <a class="el" href="pgConst.html#secConstTimer">Timer Constants</a>.</dd></dl>
<div align="center">
<img src="inline_mscgraph_3.png" alt="inline_mscgraph_3" border="0" usemap="#inline_mscgraph_3.map">
<map name="inline_mscgraph_3.map"><area href="pgConst.html#t7" shape="rect" coords="160,44,177,57" alt="">
<area href="pgConst.html#tTR6" shape="rect" coords="160,119,189,132" alt="">
<area href="pgConst.html#tFrame" shape="rect" coords="160,244,201,257" alt="">
<area href="pgConst.html#tTR26" shape="rect" coords="160,344,195,357" alt="">
</map>
</div>
 <dl class="user" compact><dt><b>Code example</b></dt><dd><div class="fragment"><pre class="fragment">    <span class="comment">/* MCU::[tmr] &amp;&amp; AT86RF212::... */</span>
    delay(t7);
    <span class="comment">/* MCU::[waitirq] */</span>
    delay(tTR6);
    <span class="comment">/* MCU::[tmrorirq] */</span>
    delay(tFrame);
    <span class="comment">/* MCU::[tmraccess] */</span>
    ed = <a class="code" href="group__apiHalFuncBasic.html#gd31a9a2f63e52d485d975d59f7c1d5f4" title="Read the value from a register.">trx_reg_read</a>(<a class="code" href="group__apiHalPHY212Reg.html#g4caa8e52e3f9ad2217864df65fdfd501">RG_PHY_ED_LEVEL</a>);
    <span class="comment">/* MCU::[async] */</span>
    <span class="comment">/* TRX_IRQ_RX_START occurs here */</span>
    <span class="comment">/* MCU::[assert] */</span>
    state = <a class="code" href="group__apiHalFuncBasic.html#ge7ea3d090b5d26b73a5c62e2e61e0231" title="Read a value from a subregister.">trx_bit_read</a>(<a class="code" href="group__apiHalPHY212Sreg.html#gbb9dcc6f85b1154d76645b5de64d4835">SR_TRX_STATUS</a>);
    ASSERT(state==<a class="code" href="group__apiHalPHY212Const.html#gd9aff3d987888b9d1bcb9fc12d2c996e">TRX_OFF</a>);
</pre></div> </dd></dl>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Aug 17 13:34:58 2009 for SWPM AT86RF212 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
